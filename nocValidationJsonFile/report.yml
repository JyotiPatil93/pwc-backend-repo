ReportDefinitions:
- reportName: MISSummaryReport
  summary: Summary report
  version: 1.0.0
  moduleName: egov-opmsService
  sourceColumns:
  - name: applcationType
    label: report.tl.applcationType
    type: string
    source: tl
    total: false
  - name: totalNoOfApplicationReceived
    label: report.tl.totalNoOfApplicationReceived
    type: string
    source: tl
    total: false
  - name: noOfApplicationProcessed
    label: report.tl.noOfApplicationProcessed
    type: string
    source: tl
    total: false
  - name: noOfApplicationPending
    label: report.tl.noOfApplicationPending
    type: string
    source: tl
    total: false
  - name: noOfApplicationRejected
    label: report.tl.noOfApplicationRejected
    type: string
    source: tl
    total: false
  additionalConfig:
    reportTitle: reports.tl.MISSummaryReport.title
  query:  SELECT (CASE WHEN finalResult.applcationtype='ADVERTISEMENTNOC' THEN 'Permission for Advertisement' WHEN finalResult.applcationtype='PETNOC' THEN 'Permission to Keep Pet Dog' WHEN finalResult.applcationtype='ROADCUTNOC' THEN 'Permission for Road Cut' WHEN finalResult.applcationtype='SELLMEATNOC' THEN 'Permission to Sell Meat' END) applcationType, SUM(finalResult.totalapplications) AS totalNoOfApplicationReceived, SUM(finalResult.approvedcounter) AS noOfApplicationProcessed, SUM(finalResult.rejectedcounter) AS noOfApplicationRejected, SUM(finalResult.pendingcounter) AS noOfApplicationPending FROM (SELECT a.application_type applcationType, Count(1) totalApplications, Count(a.application_uuid) approvedCounter, 0 rejectedCounter, 0 pendingCounter FROM egpm_noc_application a WHERE a.application_status = 'APPROVED' GROUP BY a.application_type, a.application_status UNION ALL SELECT a.application_type applcationType, Count(1) totalApplications, 0 approvedCounter, Count(a.application_uuid) rejectedCounter, 0 pendingCounter FROM egpm_noc_application a WHERE a.application_status = 'REJECTED' AND To_date(To_char( To_timestamp(a.created_time / 1000) :: timestamp, 'YYYY-MM-DD') :: text, 'YYYY-MM-DD') BETWEEN To_date($fromDate, 'YYYY-MM-DD') AND To_date($toDate, 'YYYY-MM-DD') GROUP BY a.application_type, a.application_status UNION ALL SELECT a.application_type applcationType, Count(1) totalApplications, 0 approvedCounter, 0 rejectedCounter, Count(a.application_uuid) pendingCounter FROM egpm_noc_application a WHERE a.application_status NOT IN ( 'APPROVED', 'REJECTED' ) AND To_date(To_char( To_timestamp(a.created_time / 1000) :: timestamp, 'YYYY-MM-DD') :: text, 'YYYY-MM-DD') BETWEEN To_date($fromDate, 'YYYY-MM-DD') AND To_date($toDate, 'YYYY-MM-DD') GROUP BY a.application_type, a.application_status ) finalResult GROUP BY finalResult.applcationtype ORDER BY finalResult.applcationtype